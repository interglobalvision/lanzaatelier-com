{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","init","_this","this","$","window","resize","onResize","document","ready","Menu","Layout","Project","ScrollMagic","removeClass","hasClass","getColHeights","toggleOverflow","fixWidows","each","string","html","replace","speedLimit","cols","left","right","holder","scrollDirection","pos","readyState","bind","addClass","on","overMinWindowWidth","width","setColPadding","i","element","$colFirstItem","children","first","$colLastItem","last","halfWindowMinusFooter","height","outerHeight","halfWindowMinusHeader","css","find","initialLoad","max","updateScroll","proxy","scroll","event","deltaY","deltaFactor","scrollSpeed","Math","abs","move","checkScrollPos","innerHeight","requestAnimationFrame","length","initSwiper","bindSwiperPagination","swiper","Swiper","loop","nextButton","prevButton","pagination","paginationType","spaceBetween","setWrapperSize","paginationCustomRender","current","total","stopPropagation","slidePrev","slideNext","bindToggle","toggleClass","Archive","Single","bindProjectToggle","perfectScrollbar","target","nodeName","suppressScrollX","bindTitleHover","hover","attr"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, Swiper, document, Site */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n      _this.Menu.init();\n      _this.Layout.init();\n      _this.Project.init();\n      _this.ScrollMagic.init();\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    $('body').removeClass('menu-active');\n\n    if ($('body').hasClass('home')) {\n      _this.ScrollMagic.getColHeights();\n      _this.ScrollMagic.toggleOverflow();\n    }\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n};\n\nSite.ScrollMagic = {\n  init: function() {\n    var _this = this;\n\n    if ($('body').hasClass('home')) {\n      // Higher means slower\n      _this.speedLimit = 4000;\n\n      _this.cols = {};\n      _this.cols.left = $('.scroll-col-left');\n      _this.cols.right = $('.scroll-col-right');\n      _this.cols.holder = $('.scroll-cols-holder');\n\n      _this.cols.holder.removeClass('u-hidden');\n\n      _this.scrollDirection = 0;\n      _this.cols.left.pos = 0;\n      _this.cols.right.pos = 0;\n\n      _this.toggleOverflow();\n\n      if (document.readyState === \"complete\") {\n        _this.getColHeights(true);\n        _this.bind();\n        $('#front-loading').addClass('u-hidden');\n      } else {\n        $(window).on('load', function() {\n          _this.getColHeights(true);\n          _this.bind();\n          $('#front-loading').addClass('u-hidden');\n        });\n      }\n\n    }\n  },\n\n  overMinWindowWidth: function() {\n    if ($(window).width() >= 1024) {\n      return true;\n    }\n    return false;\n  },\n\n  // set padding on top and bottom items of each col\n  setColPadding: function() {\n    var _this = this;\n\n    if (_this.overMinWindowWidth()) {\n      $('.scroll-col').each( function(i, element) {\n        var $colFirstItem = $(element).children('.desktop-front-item').first();\n        var $colLastItem = $(element).children('.desktop-front-item').last();\n\n        var halfWindowMinusFooter = ($(window).height() / 2) - $('#footer').outerHeight();\n        var halfWindowMinusHeader = ($(window).height() / 2) - $('#header').outerHeight();\n\n        $colFirstItem.css('padding-top', (halfWindowMinusHeader - ($colFirstItem.find('img').height() / 2)) + 'px');\n        $colLastItem.css('padding-bottom', (halfWindowMinusFooter - ($colLastItem.find('img').height() / 2)) + 'px');\n      });\n    }\n  },\n\n  getColHeights: function(initialLoad) {\n    var _this = this;\n\n    _this.setColPadding();\n\n    if (_this.overMinWindowWidth()) {\n\n      _this.cols.left.height = $('.scroll-col-left').outerHeight(true);\n      _this.cols.right.height = $('.scroll-col-right').outerHeight(true);\n      _this.cols.holder.height = $('.scroll-cols-holder').outerHeight(true);\n\n      _this.cols.left.max = -(_this.cols.left.height - _this.cols.holder.height);\n      _this.cols.right.max = (_this.cols.right.height - _this.cols.holder.height);\n\n      _this.updateScroll(initialLoad);\n    }\n  },\n\n  bind: function() {\n    var _this = this;\n\n    // Bind scroll in front page sections\n    $(document).on('mousewheel', $.proxy( _this.scroll, _this) );\n\n  },\n\n  scroll: function(event) {\n    var _this = this;\n\n    _this.scrollDirection = event.deltaY * event.deltaFactor;\n    _this.scrollSpeed = _this.speedLimit / Math.abs(_this.scrollDirection);\n\n    _this.cols.left.move = (_this.cols.left.height - _this.cols.holder.height) / _this.scrollSpeed;\n    _this.cols.right.move = (_this.cols.right.height - _this.cols.holder.height) / _this.scrollSpeed;\n\n    if(_this.scrollDirection > 0) {\n      _this.cols.left.pos = _this.cols.left.pos + _this.cols.left.move;\n      _this.cols.right.pos = _this.cols.right.pos - _this.cols.right.move;\n    } else {\n      _this.cols.left.pos = _this.cols.left.pos - _this.cols.left.move;\n      _this.cols.right.pos = _this.cols.right.pos + _this.cols.right.move;\n    }\n\n    _this.updateScroll();\n  },\n\n  checkScrollPos: function() {\n    var _this = this;\n\n    if (_this.cols.left.pos > 0 || _this.cols.left.height <  _this.cols.holder.height) {\n      _this.cols.left.pos = 0;\n    } else if (_this.cols.left.pos < _this.cols.left.max) {\n      _this.cols.left.pos = _this.cols.left.max;\n    }\n\n    if (_this.cols.right.pos < 0 || _this.cols.right.height <  _this.cols.holder.height) {\n      _this.cols.right.pos = 0;\n    } else if (_this.cols.right.pos > _this.cols.right.max) {\n      _this.cols.right.pos = _this.cols.right.max;\n    }\n  },\n\n  updateScroll: function(initialLoad) {\n    var _this = this;\n\n    _this.checkScrollPos();\n\n    if (_this.overMinWindowWidth()) {\n      // is desktop\n\n      if (initialLoad) {\n        // set scroll pos at column middles\n\n        _this.cols.left.pos = ($(window).height() / 2) - (_this.cols.left.innerHeight() / 2);\n        _this.cols.right.pos = (_this.cols.right.innerHeight() / 2) - ($(window).height() / 2);\n\n        _this.cols.left.css('transform', 'translateY(' + _this.cols.left.pos + 'px)');\n        _this.cols.right.css('transform', 'translateY(' + _this.cols.right.pos + 'px)');\n\n      } else {\n        //on mousewheel\n\n        requestAnimationFrame(function() {\n\n          _this.cols.left.css('transform', 'translateY(' + _this.cols.left.pos + 'px)');\n          _this.cols.right.css('transform', 'translateY(' + _this.cols.right.pos + 'px)');\n\n        });\n      }\n\n    } else {\n      //is tablet or mobile\n\n      _this.cols.left.css('transform', 'translateY(0)');\n      _this.cols.right.css('transform', 'translateY(0)');\n\n    }\n  },\n\n  toggleOverflow: function() {\n    var _this = this;\n\n    if (_this.overMinWindowWidth()) {\n      if (!$('html, body').hasClass('u-overflow-hidden')) {\n        // This is to avoid 'elastic' scroll on macOS and iOS\n        $('html, body').addClass('u-overflow-hidden');\n      }\n    } else {\n      if ($('html, body').hasClass('u-overflow-hidden')) {\n        $('html, body').removeClass('u-overflow-hidden');\n      }\n    }\n  },\n\n};\n\nSite.Layout = {\n  init: function() {\n    var _this = this;\n\n    if ($('.swiper-slide').length > 1) {\n      _this.initSwiper();\n      _this.bindSwiperPagination();\n    }\n  },\n\n  initSwiper: function() {\n    var _this = this;\n\n    _this.swiper = new Swiper('.swiper-container', {\n      loop: true,\n      nextButton: '.project-gallery-next',\n      prevButton: '.project-gallery-prev',\n      pagination: '#project-gallery-index',\n      paginationType: 'custom',\n      spaceBetween: 48,\n      setWrapperSize: true,\n      paginationCustomRender: function (swiper, current, total) {\n        if ($('#project-gallery-index').length) {\n          return '<span id=\"gallery-index-active\">' + current + '</span>/<span id=\"gallery-index-length\">' + total + '</span>';\n        }\n      },\n    });\n  },\n\n  bindSwiperPagination: function() {\n    var _this = this;\n\n    $('#project-slide-prev').bind('click', function(event) {\n      event.stopPropagation();\n\n      _this.swiper.slidePrev();\n    });\n\n    $('#project-slide-next').bind('click', function(event) {\n      event.stopPropagation();\n\n      _this.swiper.slideNext();\n    });\n  },\n};\n\nSite.Menu = {\n  init: function() {\n    var _this = this;\n\n    _this.bindToggle();\n  },\n\n  bindToggle: function() {\n    $('.mobile-toggle').on('click', function() {\n      $('body').toggleClass('menu-active');\n    });\n  }\n};\n\nSite.Project = {\n  init: function() {\n    var _this = this;\n\n    if ($('body').hasClass('post-type-archive-project')) {\n      _this.Archive.init();\n    }\n\n    if ($('body').hasClass('single-project')) {\n      _this.Single.init();\n    }\n\n  },\n\n  Single: {\n    init: function() {\n      var _this = this;\n\n      _this.bindProjectToggle();\n      _this.perfectScrollbar();\n    },\n\n    bindProjectToggle: function() {\n      $('.project-content-holder').bind('click', function(event) {\n        if (event.target.nodeName !== 'A') {\n          $('.project-content-holder').toggleClass('hide');\n        }\n      });\n    },\n\n    perfectScrollbar: function() {\n      $('.project-content-holder').perfectScrollbar({\n        suppressScrollX: true,\n      });\n    },\n  },\n\n  Archive: {\n    init: function() {\n      var _this = this;\n\n      _this.bindTitleHover();\n      _this.perfectScrollbar();\n    },\n\n    bindTitleHover: function() {\n      $('.archive-project-title').hover( function() {\n        // Mouse enter\n        $('.project-photos-container[data-id=' + $(this).attr('data-id') + ']').removeClass('hide');\n      }, function() {\n        // Mouse leave\n        $('.project-photos-container[data-id=' + $(this).attr('data-id') + ']').addClass('hide');\n      });\n    },\n\n    perfectScrollbar: function() {\n      $('#archive-project-holder').perfectScrollbar({\n        suppressScrollX: true,\n      });\n    },\n  }\n};\n\nSite.init();\n"],"sourceRoot":"/source/"}